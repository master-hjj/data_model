{"remainingRequest":"C:\\Users\\m1980\\Desktop\\buct-kaggle\\data_model\\front\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\m1980\\Desktop\\buct-kaggle\\data_model\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\m1980\\Desktop\\buct-kaggle\\data_model\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\m1980\\Desktop\\buct-kaggle\\data_model\\front\\src\\layout\\components\\Sidebar\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\m1980\\Desktop\\buct-kaggle\\data_model\\front\\src\\layout\\components\\Sidebar\\index.vue","mtime":1730289080030},{"path":"C:\\Users\\m1980\\Desktop\\buct-kaggle\\data_model\\front\\babel.config.js","mtime":1720420573884},{"path":"C:\\Users\\m1980\\Desktop\\buct-kaggle\\data_model\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1720430444311},{"path":"C:\\Users\\m1980\\Desktop\\buct-kaggle\\data_model\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1720430444357},{"path":"C:\\Users\\m1980\\Desktop\\buct-kaggle\\data_model\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1720430444311},{"path":"C:\\Users\\m1980\\Desktop\\buct-kaggle\\data_model\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1720430443512}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJDOi9Vc2Vycy9tMTk4MC9EZXNrdG9wL2J1Y3Qta2FnZ2xlL2RhdGFfbW9kZWwvZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyIpOwp2YXIgX29iamVjdFNwcmVhZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkM6L1VzZXJzL20xOTgwL0Rlc2t0b3AvYnVjdC1rYWdnbGUvZGF0YV9tb2RlbC9mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RTcHJlYWQyLmpzIikpOwp2YXIgX3Z1ZXggPSByZXF1aXJlKCJ2dWV4Iik7CnZhciBfTG9nbyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi9Mb2dvIikpOwp2YXIgX1NpZGViYXJJdGVtID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL1NpZGViYXJJdGVtIikpOwp2YXIgX3ZhcmlhYmxlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkAvYXNzZXRzL3N0eWxlcy92YXJpYWJsZXMuc2NzcyIpKTsKdmFyIF9tZW51ID0gcmVxdWlyZSgiQC9hcGkvbWVudSIpOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLyDlvJXlhaXmjqXlj6Por7fmsYIKdmFyIF9kZWZhdWx0ID0gZXhwb3J0cy5kZWZhdWx0ID0gewogIGNvbXBvbmVudHM6IHsKICAgIFNpZGViYXJJdGVtOiBfU2lkZWJhckl0ZW0uZGVmYXVsdCwKICAgIExvZ286IF9Mb2dvLmRlZmF1bHQKICB9LAogIGNvbXB1dGVkOiAoMCwgX29iamVjdFNwcmVhZDIuZGVmYXVsdCkoKDAsIF9vYmplY3RTcHJlYWQyLmRlZmF1bHQpKCgwLCBfb2JqZWN0U3ByZWFkMi5kZWZhdWx0KSh7fSwgKDAsIF92dWV4Lm1hcFN0YXRlKShbInNldHRpbmdzIl0pKSwgKDAsIF92dWV4Lm1hcEdldHRlcnMpKFsic2lkZWJhclJvdXRlcnMiLCAic2lkZWJhciJdKSksIHt9LCB7CiAgICBmaWx0ZXJlZFNpZGViYXJSb3V0ZXJzOiBmdW5jdGlvbiBmaWx0ZXJlZFNpZGViYXJSb3V0ZXJzKCkgewogICAgICB2YXIgdXNlclJvbGVzID0gdGhpcy4kc3RvcmUuc3RhdGUudXNlci5yb2xlczsgLy8g6I635Y+W5b2T5YmN55So5oi36KeS6ImyCiAgICAgIHJldHVybiB0aGlzLnNpZGViYXJSb3V0ZXJzLm1hcChmdW5jdGlvbiAocm91dGUpIHsKICAgICAgICB2YXIgX2ZpbHRlcmVkUm91dGUkbWV0YTsKICAgICAgICB2YXIgZmlsdGVyZWRSb3V0ZSA9ICgwLCBfb2JqZWN0U3ByZWFkMi5kZWZhdWx0KSh7fSwgcm91dGUpOyAvLyDliJvlu7rlvZPliY3oj5zljZXpobnnmoTlia/mnKwKCiAgICAgICAgLy8g6YCS5b2S6L+H5ruk5a2Q6I+c5Y2VCiAgICAgICAgaWYgKGZpbHRlcmVkUm91dGUuY2hpbGRyZW4pIHsKICAgICAgICAgIGZpbHRlcmVkUm91dGUuY2hpbGRyZW4gPSBmaWx0ZXJlZFJvdXRlLmNoaWxkcmVuLmZpbHRlcihmdW5jdGlvbiAoY2hpbGQpIHsKICAgICAgICAgICAgdmFyIF9jaGlsZCRtZXRhOwogICAgICAgICAgICAvLyDlpoLmnpwgbWV0YS5yb2xlcyDkuLrnqbrmiJbkuI3lrZjlnKjvvIzliJnmiYDmnInop5LoibLlj6/op4HvvJvlkKbliJnvvIzku4UgbWV0YS5yb2xlcyDlhoXnmoTop5LoibLlj6/op4EKICAgICAgICAgICAgcmV0dXJuICEoKF9jaGlsZCRtZXRhID0gY2hpbGQubWV0YSkgIT09IG51bGwgJiYgX2NoaWxkJG1ldGEgIT09IHZvaWQgMCAmJiBfY2hpbGQkbWV0YS5yb2xlcykgfHwgY2hpbGQubWV0YS5yb2xlcy5sZW5ndGggPT09IDAgfHwgY2hpbGQubWV0YS5yb2xlcy5zb21lKGZ1bmN0aW9uIChyb2xlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHVzZXJSb2xlcy5pbmNsdWRlcyhyb2xlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIC8vIOWIpOaWreeItuiPnOWNlemhueacrOi6q+eahOWPr+ingeaApwogICAgICAgIHZhciBpc1JvdXRlVmlzaWJsZSA9ICEoKF9maWx0ZXJlZFJvdXRlJG1ldGEgPSBmaWx0ZXJlZFJvdXRlLm1ldGEpICE9PSBudWxsICYmIF9maWx0ZXJlZFJvdXRlJG1ldGEgIT09IHZvaWQgMCAmJiBfZmlsdGVyZWRSb3V0ZSRtZXRhLnJvbGVzKSB8fCBmaWx0ZXJlZFJvdXRlLm1ldGEucm9sZXMubGVuZ3RoID09PSAwIHx8IGZpbHRlcmVkUm91dGUubWV0YS5yb2xlcy5zb21lKGZ1bmN0aW9uIChyb2xlKSB7CiAgICAgICAgICByZXR1cm4gdXNlclJvbGVzLmluY2x1ZGVzKHJvbGUpOwogICAgICAgIH0pOwoKICAgICAgICAvLyDku4Xov5Tlm57nrKblkIjop5LoibLmnYPpmZDnmoTot6/nlLHlkozlrZDot6/nlLEKICAgICAgICByZXR1cm4gZmlsdGVyZWRSb3V0ZS5jaGlsZHJlbiAmJiBmaWx0ZXJlZFJvdXRlLmNoaWxkcmVuLmxlbmd0aCA+IDAgfHwgaXNSb3V0ZVZpc2libGUgPyBmaWx0ZXJlZFJvdXRlIDogbnVsbDsKICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChyb3V0ZSkgewogICAgICAgIHJldHVybiByb3V0ZSAhPT0gbnVsbDsKICAgICAgfSk7IC8vIOa4hemZpOaXoOaViOi3r+eUsQogICAgfSwKICAgIGFjdGl2ZU1lbnU6IGZ1bmN0aW9uIGFjdGl2ZU1lbnUoKSB7CiAgICAgIHZhciByb3V0ZSA9IHRoaXMuJHJvdXRlOwogICAgICB2YXIgbWV0YSA9IHJvdXRlLm1ldGEsCiAgICAgICAgcGF0aCA9IHJvdXRlLnBhdGg7CiAgICAgIGlmIChtZXRhLmFjdGl2ZU1lbnUpIHsKICAgICAgICByZXR1cm4gbWV0YS5hY3RpdmVNZW51OwogICAgICB9CiAgICAgIHJldHVybiBwYXRoOwogICAgfSwKICAgIHNob3dMb2dvOiBmdW5jdGlvbiBzaG93TG9nbygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnNldHRpbmdzLnNpZGViYXJMb2dvOwogICAgfSwKICAgIHZhcmlhYmxlczogZnVuY3Rpb24gdmFyaWFibGVzKCkgewogICAgICByZXR1cm4gX3ZhcmlhYmxlczIuZGVmYXVsdDsKICAgIH0sCiAgICBpc0NvbGxhcHNlOiBmdW5jdGlvbiBpc0NvbGxhcHNlKCkgewogICAgICByZXR1cm4gIXRoaXMuc2lkZWJhci5vcGVuZWQ7CiAgICB9CiAgfSksCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgICgwLCBfbWVudS5nZXRSb3V0ZXJzKSgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIGNvbnNvbGUubG9nKCLmjqXlj6Pov5Tlm57nmoTmlbDmja46IiwgcmVzcG9uc2UuZGF0YSk7IC8vIOaJk+WNsOaOpeWPo+i/lOWbnueahOaVsOaNrgogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoIuiOt+WPlui3r+eUseaVsOaNruWksei0pToiLCBlcnJvcik7CiAgICB9KTsKICB9Cn07"},{"version":3,"names":["_vuex","require","_Logo","_interopRequireDefault","_SidebarItem","_variables2","_menu","_default","exports","default","components","SidebarItem","Logo","computed","_objectSpread2","mapState","mapGetters","filteredSidebarRouters","userRoles","$store","state","user","roles","sidebarRouters","map","route","_filteredRoute$meta","filteredRoute","children","filter","child","_child$meta","meta","length","some","role","includes","isRouteVisible","activeMenu","$route","path","showLogo","settings","sidebarLogo","variables","isCollapse","sidebar","opened","mounted","getRouters","then","response","console","log","data","catch","error"],"sources":["src/layout/components/Sidebar/index.vue"],"sourcesContent":["<template>\r\n    <div :class=\"{'has-logo':showLogo}\" :style=\"{ backgroundColor: settings.sideTheme === 'theme-dark' ? variables.menuBackground : variables.menuLightBackground }\">\r\n        <logo v-if=\"showLogo\" :collapse=\"isCollapse\" />\r\n        <el-scrollbar :class=\"settings.sideTheme\" wrap-class=\"scrollbar-wrapper\">\r\n            <el-menu\r\n                :default-active=\"activeMenu\"\r\n                :collapse=\"isCollapse\"\r\n                :background-color=\"settings.sideTheme === 'theme-dark' ? variables.menuBackground : variables.menuLightBackground\"\r\n                :text-color=\"settings.sideTheme === 'theme-dark' ? variables.menuColor : variables.menuLightColor\"\r\n                :unique-opened=\"true\"\r\n                :active-text-color=\"settings.theme\"\r\n                :collapse-transition=\"false\"\r\n                mode=\"vertical\"\r\n            >\r\n                <sidebar-item\r\n                    v-for=\"(route, index) in filteredSidebarRouters\"\r\n                    :key=\"route.path + index\"\r\n                    :item=\"route\"\r\n                    :base-path=\"route.path\"\r\n                />\r\n            </el-menu>\r\n        </el-scrollbar>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapState } from \"vuex\";\r\nimport Logo from \"./Logo\";\r\nimport SidebarItem from \"./SidebarItem\";\r\nimport variables from \"@/assets/styles/variables.scss\";\r\nimport { getRouters } from \"@/api/menu\"; // 引入接口请求\r\n\r\nexport default {\r\n    components: { SidebarItem, Logo },\r\n    computed: {\r\n        ...mapState([\"settings\"]),\r\n        ...mapGetters([\"sidebarRouters\", \"sidebar\"]),\r\n\r\n        filteredSidebarRouters() {\r\n            const userRoles = this.$store.state.user.roles; // 获取当前用户角色\r\n            return this.sidebarRouters\r\n                .map(route => {\r\n                    const filteredRoute = { ...route }; // 创建当前菜单项的副本\r\n\r\n                    // 递归过滤子菜单\r\n                    if (filteredRoute.children) {\r\n                        filteredRoute.children = filteredRoute.children.filter(child => {\r\n                            // 如果 meta.roles 为空或不存在，则所有角色可见；否则，仅 meta.roles 内的角色可见\r\n                            return !child.meta?.roles || child.meta.roles.length === 0 || child.meta.roles.some(role => userRoles.includes(role));\r\n                        });\r\n                    }\r\n\r\n                    // 判断父菜单项本身的可见性\r\n                    const isRouteVisible = !filteredRoute.meta?.roles || \r\n                        filteredRoute.meta.roles.length === 0 || \r\n                        filteredRoute.meta.roles.some(role => userRoles.includes(role));\r\n\r\n                    // 仅返回符合角色权限的路由和子路由\r\n                    return (filteredRoute.children && filteredRoute.children.length > 0) || isRouteVisible ? filteredRoute : null;\r\n                })\r\n                .filter(route => route !== null); // 清除无效路由\r\n        },\r\n\r\n\r\n        activeMenu() {\r\n            const route = this.$route;\r\n            const { meta, path } = route;\r\n            if (meta.activeMenu) {\r\n                return meta.activeMenu;\r\n            }\r\n            return path;\r\n        },\r\n        showLogo() {\r\n            return this.$store.state.settings.sidebarLogo;\r\n        },\r\n        variables() {\r\n            return variables;\r\n        },\r\n        isCollapse() {\r\n            return !this.sidebar.opened;\r\n        }\r\n    },\r\n    mounted() {\r\n        getRouters().then(response => {\r\n            console.log(\"接口返回的数据:\", response.data); // 打印接口返回的数据\r\n        }).catch(error => {\r\n            console.error(\"获取路由数据失败:\", error);\r\n        });\r\n    }\r\n};\r\n</script>\r\n\r\n"],"mappings":";;;;;;;;;;;;;AA0BA,IAAAA,KAAA,GAAAC,OAAA;AACA,IAAAC,KAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,YAAA,GAAAD,sBAAA,CAAAF,OAAA;AACA,IAAAI,WAAA,GAAAF,sBAAA,CAAAF,OAAA;AACA,IAAAK,KAAA,GAAAL,OAAA;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA,IAAAM,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEA;EACAC,UAAA;IAAAC,WAAA,EAAAA,oBAAA;IAAAC,IAAA,EAAAA;EAAA;EACAC,QAAA,MAAAC,cAAA,CAAAL,OAAA,MAAAK,cAAA,CAAAL,OAAA,MAAAK,cAAA,CAAAL,OAAA,MACA,IAAAM,cAAA,kBACA,IAAAC,gBAAA;IAEAC,sBAAA,WAAAA,uBAAA;MACA,IAAAC,SAAA,QAAAC,MAAA,CAAAC,KAAA,CAAAC,IAAA,CAAAC,KAAA;MACA,YAAAC,cAAA,CACAC,GAAA,WAAAC,KAAA;QAAA,IAAAC,mBAAA;QACA,IAAAC,aAAA,OAAAb,cAAA,CAAAL,OAAA,MAAAgB,KAAA;;QAEA;QACA,IAAAE,aAAA,CAAAC,QAAA;UACAD,aAAA,CAAAC,QAAA,GAAAD,aAAA,CAAAC,QAAA,CAAAC,MAAA,WAAAC,KAAA;YAAA,IAAAC,WAAA;YACA;YACA,UAAAA,WAAA,GAAAD,KAAA,CAAAE,IAAA,cAAAD,WAAA,eAAAA,WAAA,CAAAT,KAAA,KAAAQ,KAAA,CAAAE,IAAA,CAAAV,KAAA,CAAAW,MAAA,UAAAH,KAAA,CAAAE,IAAA,CAAAV,KAAA,CAAAY,IAAA,WAAAC,IAAA;cAAA,OAAAjB,SAAA,CAAAkB,QAAA,CAAAD,IAAA;YAAA;UACA;QACA;;QAEA;QACA,IAAAE,cAAA,MAAAX,mBAAA,GAAAC,aAAA,CAAAK,IAAA,cAAAN,mBAAA,eAAAA,mBAAA,CAAAJ,KAAA,KACAK,aAAA,CAAAK,IAAA,CAAAV,KAAA,CAAAW,MAAA,UACAN,aAAA,CAAAK,IAAA,CAAAV,KAAA,CAAAY,IAAA,WAAAC,IAAA;UAAA,OAAAjB,SAAA,CAAAkB,QAAA,CAAAD,IAAA;QAAA;;QAEA;QACA,OAAAR,aAAA,CAAAC,QAAA,IAAAD,aAAA,CAAAC,QAAA,CAAAK,MAAA,QAAAI,cAAA,GAAAV,aAAA;MACA,GACAE,MAAA,WAAAJ,KAAA;QAAA,OAAAA,KAAA;MAAA;IACA;IAGAa,UAAA,WAAAA,WAAA;MACA,IAAAb,KAAA,QAAAc,MAAA;MACA,IAAAP,IAAA,GAAAP,KAAA,CAAAO,IAAA;QAAAQ,IAAA,GAAAf,KAAA,CAAAe,IAAA;MACA,IAAAR,IAAA,CAAAM,UAAA;QACA,OAAAN,IAAA,CAAAM,UAAA;MACA;MACA,OAAAE,IAAA;IACA;IACAC,QAAA,WAAAA,SAAA;MACA,YAAAtB,MAAA,CAAAC,KAAA,CAAAsB,QAAA,CAAAC,WAAA;IACA;IACAC,SAAA,WAAAA,UAAA;MACA,OAAAA,mBAAA;IACA;IACAC,UAAA,WAAAA,WAAA;MACA,aAAAC,OAAA,CAAAC,MAAA;IACA;EAAA,EACA;EACAC,OAAA,WAAAA,QAAA;IACA,IAAAC,gBAAA,IAAAC,IAAA,WAAAC,QAAA;MACAC,OAAA,CAAAC,GAAA,aAAAF,QAAA,CAAAG,IAAA;IACA,GAAAC,KAAA,WAAAC,KAAA;MACAJ,OAAA,CAAAI,KAAA,cAAAA,KAAA;IACA;EACA;AACA","ignoreList":[]}]}